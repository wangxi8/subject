<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <!-- 引入 echarts.js -->
    <script src="../../build/dist/echarts.min.js"></script>
</head>
<body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="width: 1000px;height:600px;border:5px solid gold"></div>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));
        //节点数据
        var waterpower = 281.99;
        var windpower = 41.64;


// //第一组
        notes =
             [
                            
                 [    1.0052,

                   -4.4596,

                    0.0240,

                    0.0120,

                    0.0000,

                    0.0000],

                [    0.9948,

                   -5.3350,

                    0.0760,

                    0.0160,

                    0.0000,

                    0.0000],

                [    0.9916,

                   -6.2632,

                    0.0000,

                    0.0000,

                    0.0000,

                    0.0000],

                [    0.9871,

                   -8.0447,

                    0.2280,

                    0.1090,

                    0.0000,

                    0.0000],

                [    0.9756,

                   -8.0216,

                    0.0000,

                    0.0000,

                    0.0000,

                    0.0000],

                [    0.9555,

                  -10.1993,

                    0.0580,

                    0.0200,

                    0.0000,

                    0.0000],

                [    0.9756,

                   -9.5031,

                    0.1120,

                    0.0750,

                    0.0000,

                    0.0000],

                [    0.9584,

                  -10.5444,

                    0.0620,

                    0.0160,

                    0.0000,

                    0.0000],

                [    0.9524,

                  -10.6185,

                    0.0820,

                    0.0250,

                    0.0000,

                    0.0000],

                [    0.9593,

                  -10.1150,

                    0.0350,

                    0.0180,

                    0.0000,

                    0.0000],

                [    0.9508,

                  -10.4204,

                    0.0900,

                    0.0580,

                    0.0000,

                    0.0000],

                [    0.9402,

                  -11.2998,

                    0.0320,

                    0.0090,

                    0.0000,

                    0.0000],

                [    0.9364,

                  -11.4770,

                    0.0950,

                    0.0340,

                    0.0000,

                    0.0000],

                [    0.9403,

                  -11.2248,

                    0.0220,

                    0.0070,

                    0.0000,

                    0.0000],

                [    0.9420,

                  -10.7408,

                    0.1750,

                    0.1120,

                    0.0000,

                    0.0000],

                [    0.9426,

                  -10.7271,

                    0.0000,

                    0.0000,

                    0.0000,

                    0.0000],

                [    0.9389,

                  -11.0502,

                    0.0320,

                    0.0160,

                    0.0000,

                    0.0000],

                [    0.9300,

                  -11.2168,

                    0.0870,

                    0.0670,

                    0.0000,

                    0.0000],

                [    0.9383,

                  -11.2765,

                    0.0000,

                    0.0000,

                    0.0000,

                    0.0000],

                [    0.9190,

                  -11.7700,

                    0.0350,

                    0.0230,

                    0.0000,

                    0.0000],

                [    0.9529,

                  -10.9925,

                    0.0000,

                    0.0000,

                    0.0000,

                    0.0000],

                [    0.9880,

                   -6.7131,

                    0.0000,

                    0.0000,

                    0.0000,

                    0.0000],

                [    0.9314,

                  -12.4153,

                    0.0240,

                    0.0090,

                    0.0000,

                    0.0000],

                [    0.9190,

                  -13.4418,

                    0.1060,

                    0.0190,

                    0.0000,

                    0.0000],

                [    1.0000,

                   -2.2412,

                    0.5756,

                   -0.7346,

                    0.0000,

                    0.0000],

                [    1.0000,

                   -9.2819,

                    0.2456,

                    0.4949,

                    0.0000,

                    0.0000],

                [    1.0000,

                   -6.3837,

                    0.3500,

                    0.5182,

                    0.0000,

                    0.0000],

                [    1.0000,

                   -5.8307,

                    0.1793,

                    0.1209,

                    0.0000,

                    0.0000],

                [    1.0000,

                   -8.1125,

                    0.1691,

                    0.1767,

                    0.0000,

                    0.0000],

                [    1.0500,

                    0.0000,

                    1.4017,

                    0.7219,

                    0.0000,

                    0.0000],
                [    1.0000,

                     -43.573,

                    1.4017,

                    0.7219,

                    0.0000,

                    0.0000],

        ];
//第二组
        var waterpower = 284.01;
        var windpower = 39.02;
    notes =
        [
            [    1.0087,

               -2.8350,

                0.0240,

                0.0120,

                0.0000,

                0.0000],

            [    0.9991,

               -3.3514,

                0.0760,

                0.0160,

                0.0000,

                0.0000],

            [    0.9938,

               -4.2355,

                0.0000,

                0.0000,

                0.0000,

                0.0000],

            [    0.9884,

               -6.2426,

                0.2280,

                0.1090,

                0.0000,

                0.0000],

            [    0.9749,

               -5.0256,

                0.0000,

                0.0000,

                0.0000,

                0.0000],

            [    0.9525,

               -6.6786,

                0.0580,

                0.0200,

                0.0000,

                0.0000],

            [    0.9792,

               -3.6820,

                0.1120,

                0.0750,

                0.0000,

                0.0000],

            [    0.9618,

               -5.0088,

                0.0620,

                0.0160,

                0.0000,

                0.0000],

            [    0.9537,

               -5.3702,

                0.0820,

                0.0250,

                0.0000,

                0.0000],

            [    0.9593,

               -5.2413,

                0.0350,

                0.0180,

                0.0000,

                0.0000],

            [    0.9485,

               -6.4901,

                0.0900,

                0.0580,

                0.0000,

                0.0000],

            [    0.9397,

               -6.6551,

                0.0320,

                0.0090,

                0.0000,

                0.0000],

            [    0.9350,

               -7.1974,

                0.0950,

                0.0340,

                0.0000,

                0.0000],

            [    0.9385,

               -7.1368,

                0.0220,

                0.0070,

                0.0000,

                0.0000],

            [    0.9391,

               -7.1737,

                0.1750,

                0.1120,

                0.0000,

                0.0000],

            [    0.9398,

               -7.1440,

                0.0000,

                0.0000,

                0.0000,

                0.0000],

            [    0.9387,

               -6.4166,

                0.0320,

                0.0160,

                0.0000,

                0.0000],

            [    0.9284,

               -7.4267,

                0.0870,

                0.0670,

                0.0000,

                0.0000],

            [    0.9358,

               -8.1647,

                0.0000,

                0.0000,

                0.0000,

                0.0000],

            [    0.9165,

               -8.6608,

                0.0350,

                0.0230,

                0.0000,

                0.0000],

            [    0.9502,

               -8.2913,

                0.0000,

                0.0000,

                0.0000,

                0.0000],

            [    0.9896,

               -4.6007,

                0.0000,

                0.0000,

                0.0000,

                0.0000],

            [    0.9287,

               -9.7224,

                0.0240,

                0.0090,

                0.0000,

                0.0000],

            [    0.9162,

              -10.7550,

                0.1060,

                0.0190,

                0.0000,

                0.0000],

            [    1.0000,

               -1.3337,

                0.5756,

               -0.8039,

                0.0000,

                0.0000],

            [    1.0000,

               -7.8068,

                0.2456,

                0.4863,

                0.0000,

                0.0000],

            [    1.0000,

               -4.3071,

                0.3500,

                0.4594,

                0.0000,

                0.0000],

            [    1.0000,

               -2.8333,

                0.1793,

                0.1240,

                0.0000,

                0.0000],

            [    1.0000,

                1.0385,

                0.5756,

                0.1723,

                0.0000,

                0.0000],

            [    1.0500,

                0.0000,

                0.9807,

                0.8091,

                0.0000,

                0.0000],
            [
            1.0000 ,
            -43.573,  
            0.9807,
            0.8091 ,
            0.0000 ,
            0.0000,
            ]

        ];
        // notes = [
        //     [
        //         1.0500,
        //         0.0000 ,
        //         1.3853 ,
        //         -0.0258 ,
        //         0.000 ,
        //         0.000 ,
        //     ],
        //     [
        //     1.0338 ,
        //     -2.7374 ,
        //     0.5756 ,
        //     0.0243 ,
        //     0.217 ,
        //     0.127 ,],
        //     [
        //     1.0309 ,
        //     -4.6722 ,
        //     0.0000 ,
        //     0.0000 ,
        //     0.024 ,
        //     0.012 ,],
        //     [
        //     1.0258 ,
        //     -5.5963 ,
        //     0.0000 ,
        //     0.0000 ,
        //     0.076 ,
        //     0.016 ,],
        //     [
        //     1.0058 ,
        //     -9.0005 ,
        //     0.2456 ,
        //     0.2225 ,
        //     0.942 ,
        //     0.190 ,],
        //     [
        //     1.0214 ,
        //     -6.4821 ,
        //     0.0000 ,
        //     0.0000 ,
        //     0.000 ,
        //     0.000 ,],
        //     [
        //     1.0073 ,
        //     -8.0435 ,
        //     0.0000 ,
        //     0.0000 ,
        //     0.228 ,
        //     0.109 ,],
        //     [
        //     1.0230 ,
        //     -6.4864 ,
        //     0.3500 ,
        //     0.3227 ,
        //     0.300 ,
        //     0.300 ,],
        //     [
        //     1.0583 ,
        //     -8.1508 ,
        //     0.0000 ,
        //     0.0000 ,
        //     0.000 ,
        //     0.000 ,],
        //     [
        //     1.0527 ,
        //     -10.0086, 
        //     0.0000 ,
        //     0.0000 ,
        //     0.058 ,
        //     0.020 ,],
        //     [
        //     1.0913 ,
        //     -6.3003 ,
        //     0.1793 ,
        //     0.1761 ,
        //     0.000 ,
        //     0.000 ,],
        //     [
        //     1.0564 ,
        //     -9.2015 ,
        //     0.0000 ,
        //     0.0000 ,
        //     0.112 ,
        //     0.075 ,],
        //     [
        //     1.0883 ,
        //     -8.0216 ,
        //     0.1691 ,
        //     0.2496 ,
        //     0.000 ,
        //     0.000 ,],
        //     [
        //     1.0428 ,
        //     -10.0986, 
        //     0.0000 ,
        //     0.0000 ,
        //     0.062 ,
        //     0.016 ,],
        //     [
        //     1.0393 ,
        //     -10.2212, 
        //     0.0000 ,
        //     0.0000 ,
        //     0.082 ,
        //     0.025 ,],
        //     [
        //     1.0476 ,
        //     -9.8207 ,
        //     0.0000 ,
        //     0.0000 ,
        //     0.035 ,
        //     0.018 ,],
        //     [
        //     1.0459 ,
        //     -10.1598, 
        //     0.0000 ,
        //     0.0000 ,
        //     0.090 ,
        //     0.058 ,],
        //     [
        //     1.0319 , 
        //     -10.8362,  
        //     0.0000  ,
        //     0.0000  ,
        //     0.032  ,
        //     0.009  ,],
             


        //     [
        //     1.0307 ,
        //     -11.0109, 
        //     0.0000 ,
        //     0.0000 ,
        //     0.095 ,
        //     0.034 ,],
        //     [
        //     1.0354 ,
        //     -10.8178, 
        //     0.0000 ,
        //     0.0000 ,
        //     0.022 ,
        //     0.007 ,],
        //     [
        //     1.0404 ,
        //     -10.4668, 
        //     0.0000 ,
        //     0.0000 ,
        //     0.175 ,
        //     0.112 ,],
        //     [
        //     1.0409 ,
        //     -10.4598, 
        //     0.0000 ,
        //     0.0000 ,
        //     0.000 ,
        //     0.000 ,],
        //     [
        //     1.0314, 
        //     -10.6662, 
        //     0.0000 ,
        //     0.0000 ,
        //     0.032 ,
        //     0.016 ,],
        //     [
        //     1.0292 ,
        //     -10.9159, 
        //     0.0000 ,
        //     0.0000 ,
        //     0.087 ,
        //     0.067 ,],
        //     [
        //     1.0298, 
        //     -10.8036, 
        //     0.0000 ,
        //     0.0000 ,
        //     0.000 ,
        //     0.000 ,],
        //     [
        //     1.0124 ,
        //     -11.2117, 
        //     0.0000 ,
        //     0.0000 ,
        //     0.035 ,
        //     0.023 ,],
        //     [
        //     1.0388, 
        //     -10.4761, 
        //     0.0000 ,
        //     0.0000 ,
        //     0.000 ,
        //     0.000 ,],
        //     [
        //     1.0177 ,
        //     -6.8955 ,
        //     0.0000 ,
        //     0.0000 ,
        //     0.000 ,
        //     0.000 ,],
        //     [
        //     1.0192 ,
        //     -11.6689, 
        //     0.0000 ,
        //     0.0000 ,
        //     0.024 ,
        //     0.009 ,],
        //     [
        //     1.0080 ,
        //     -12.5242,  
        //     0.0000 ,
        //     0.0000 ,
        //     0.106 ,
        //     0.019,
        //     ],
        //     [
        //     1.0000 ,
        //     -42.332,  
        //     41.64 ,
        //     92.01 ,
        //     0.0000 ,
        //     0.0000,
        //     ]
        // ];
        //母线电压
        var lineData = [1.0500,1.0338,1.0309,1.0258,1.0058,1.0214,1.0073,1.0230,1.0583,1.0527,1.0913,1.0564,1.0883,1.0428,1.0393,1.0476,1.0459,1.0319 ,1.0307,1.0354,1.0404,1.0409,1.0314,1.0292,1.0298,1.0124,1.0388,1.0177,1.0192,1.0080
        ];
        //节点功率
        var nodesData = [];
        // 指定图表的配置项和数据
       option = {
            title: {
                text: 'IEEE 30节点系统监控图',
                x:'center',
                y:'top',
                
                textStyle:{
                    fontSize:18,
                    // color:'#04564A'
                    color:'green'
                }
            },
            // dataRange: {
            //     min : 0,
            //     max : 1000000,
            //     calculable : true,
            //     color: ['#ff3333', 'orange', 'yellow','lime','aqua'],
            //     textStyle:{
            //         color:'#fff'
            //     }
            // },
            // backgroundColor: '#1b1b1b',
            legend: {
                data:['PQ节点','PV节点','平衡节点','水电厂总出力'+waterpower+'MW','风电厂总出力'+windpower+'MW'],
                x:'40px',
               
                y:'500px',
                
            },
            tooltip: {},
            animationDurationUpdate: 1500,
            animationEasingUpdate: 'quinticInOut',
            toolbox: {
                show : true,
                feature : {
                    mark : {show: true},
                    dataView : {show: true, readOnly: false},
                    magicType : {show: true, type: ['line', 'bar']},
                    restore : {show: true},
                    saveAsImage : {show: true}
                },
                orient: 'vertical',
                x:'0px',
                y:'center',
            },
            series : [
                {
                    name: 'PQ节点',

                    type: 'graph',
                    layout: 'none',
                    symbolSize: 30,
                    roam: true,
                    label: {
                        normal: {
                            show: true
                        }
                    },
                    edgeSymbol: ['circle', 'arrow'],
                    edgeSymbolSize: [4, 10],
                    edgeLabel: {
                        normal: {
                            textStyle: {
                                fontSize: 10
                            }
                        }
                    },
                    lineStyle:{
                        normal:{
                            width:3,
                        },
                    },
                    data: [
                        

                        {
                            name: '节点1',
                            x: 550,
                            y: 300,
                            label:{
                                normal:{
                                    fontSize:5
                                }
                            }
                         }, 




                         //光晕
                        //   {
                        //     symbolSize: [60, 60],
                        //     symbolOffset: [0, 0],
                        //     x: 800,
                        //     y: 100,
                        //     itemStyle: {
                        //         normal: {
                        //             color: '#85BF41',
                        //             opacity: 0.2
                        //         }
                        //     },
                        //     label:{
                        //         normal:{
                        //             fontSize:10
                        //         }
                        //     },
                        // },
                         {
                            name: '节点2',
                            x: 800,
                            y: 300,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        }, 


                        {
                            name: '节点3',
                            x: 1300,
                            y: 300,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },


                       
                        {
                            name: '节点4',
                            x: 1300,
                            y: 100,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },
                        {
                            name: '节点5',
                            x: 1175,
                            y: 400,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },
                        {
                            name: '节点6',
                            x: 1300,
                            y: 700,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },
                                                {
                            name: '节点7',
                            x: 675,
                            y: 500,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },
                         {
                            name: '节点8',
                            x: 300,
                            y: 600,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },
                        {
                            name: '节点9',
                            x: 675,
                            y: 700,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },
                        {
                            name: '节点10',
                            x: 925,
                            y: 700,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },
                        {
                            name: '节点11',
                            x: 1175,
                            y: 700,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },
                        {
                            name: '节点12',
                            x: 675,
                            y: 900,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },
                        {
                            name: '节点13',
                            x: 925,
                            y: 900,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },
                        {
                            name: '节点14',
                            x: 1175,
                            y: 900,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },





                        
                        {
                            name: '节点15',
                            x: 1300,
                            y: 900,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },
                        {
                            name: '节点16',
                            x: 1550,
                            y: 900,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },
                        {
                             name: '节点17',
                             x: 300,
                             y: 1000,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                         },                         
                        {
                            name: '节点18',
                            x: 1550,
                            y: 1000,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },



                        {
                            name: '节点19',
                            x: 2050,
                            y: 1000,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },
                                                {
                            name: '节点20',
                            x: 2300,
                            y: 1000,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                         },
                                                 {
                            name: '节点21',
                            x: 2050,
                            y: 700,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },
                                                {
                            name: '节点22',
                            x: 1925,
                            y: 300,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },
                        {
                            name: '节点23',
                            x: 2300,
                            y: 500,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },
                        {
                            name: '节点24',
                            x: 2300,
                            y: 800,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            }
                        },
                                                 {
                             name: '节点25',
                             x: 800,
                             y: 100,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            },
                            itemStyle:{
                                normal:{
                                    color:'#85BF41',
                                }
                            }
                         },
                                                {
                            name: '节点26',
                            x: 1050,
                            y: 100,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            },
                            itemStyle:{
                                normal:{
                                    color:'#85BF41',
                                }
                            }
                        },
                        {
                            name: '节点27',
                            x: 1800,
                            y: 100,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            },
                            itemStyle:{
                                normal:{
                                    color:'#85BF41',
                                }
                            }
                        },

                         {
                            name: '节点28',
                            x: 1050,
                            y: 400,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            },
                            itemStyle:{
                                normal:{
                                    color:'#85BF41',
                                }
                            }
                        },
                         {
                            name: '节点29',
                            x: 300,
                            y: 400,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            },
                            itemStyle:{
                                normal:{
                                    color:'#85BF41',
                                }
                            }
                         },
                         {
                            name: '节点30',
                            x: 550,
                            y: 100,
                            value:1,
                            label:{
                                normal:{
                                    fontSize:10,

                                },
                                // emphasis:{
                                //     formatter: [
                                //                 '{a|这段文本采用样式a}',
                                //                 '{b|这段文本采用样式b}这段用默认样式{x|这段用样式x}'
                                //             ].join('\n'),

                                //             rich: {
                                //                 a: {
                                //                     color: 'red',
                                //                     lineHeight: 10
                                //                 },
                                //                 b: {
                                //                     backgroundColor: {
                                //                         image: 'xxx/xxx.jpg'
                                //                     },
                                //                     height: 40
                                //                 },
                                //             }                                    
                                // }
                            },
                            itemStyle:{
                                normal:{
                                    color:'blue',
                                },
                                emphasis:{
                                    color:'blue',
                                }
                            },
                            //鼠标移放到节点上得提示
                            // tooltip:{
                            //     formatter:'幅值: 10<br />相角: 1',
                                
                            // }
                        },
                        {
                            name: '节点31',
                            x: 2300,
                            y: 200,
                            label:{
                                normal:{
                                    fontSize:10
                                }
                            },
                            itemStyle:{
                                normal:{
                                    color:'#85BF41',
                                }
                            }
                         },
                     ],
                     // links: [],
                    links: [
                        // {
                        //     source: 0,
                        //     target: 1,
                        //     // symbolSize: [5, 20],
                        //     label: {
                        //         normal: {
                        //             show: true,
                        //             position:'start',
                        //             formatter:'1'
                        //         }
                        //     },
                        //     lineStyle: {
                        //         normal: {
                        //             // width: 5,
                        //             // curveness: 0.2
                        //             color:'green',
                        //             opacity:1,
                        //         },
                        //         emphasis:{
                        //                 shadowColor: 'rgba(0, 0, 0, 0.5)',
                        //                 shadowBlur: 10
                        //         }
                        //     }
                        // }, 
                        {
                            source: '节点30',
                            target: '节点25',

                            label: {
                                normal: {
                                    show: true,
                                }
                            },
                            lineStyle: {
                                normal: { 
                                    color: 'green', 
                                    opacity:1,

                                },
                                emphasis:{
                                        shadowColor: 'rgba(0, 0, 0, 0.5)',
                                        shadowBlur: 10,
                                        opacity:0.5
                                }
                            },

                        }, {
                            source: '节点30',
                            target: '节点1',
                                                        label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                    opacity:1,

                                }
                            }
                        }, {
                            source: '节点25',
                            target: '节点2',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                    opacity:1,

                                }
                            }
                        }, {
                            source: '节点1',
                            target: '节点2',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                    opacity:1,

                                }
                            }
                        }, {
                            source: '节点25',
                            target: '节点26',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    width:5,
                                    // color: {
                                    //     type: 'linear',
                                    //     x: 0,
                                    //     y: 0,
                                    //     x2: 0,
                                    //     y2: 1,
                                    //     colorStops: [{
                                    //         offset: 0, color: 'yellow' // 0% 处的颜色
                                    //     }, {
                                    //         offset: 1, color: 'red' // 100% 处的颜色
                                    //     }],
                                    //     globalCoord: true // 缺省为 false
                                    // }
                                    opacity:1,
                                    color: {
                                        type: 'radial',
                                        x: 0.5,
                                        y: 0.5,
                                        r: 0.5,
                                        colorStops: [{
                                            offset: 0, color: 'red' // 0% 处的颜色
                                        }, {
                                            offset: 1, color: 'green' // 100% 处的颜色
                                        }],
                                        globalCoord: true // 缺省为 false
                                    }
                                }
                            }
                        },
                        // {
                        //     source: '节点2',
                        //     target: '节点5',
                        //     label: {
                        //         normal: {
                        //             show: true
                        //         }
                        //     },
                        //     lineStyle:{
                        //         normal:{
                        //             color: 'green',
                        //         }
                        //     }
                        // },
                        {
                            source: '节点25',
                            target: '节点3',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点2',
                            target: '节点3',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点26',
                            target: '节点4',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },                        
                        {
                            source: '节点3',
                            target: '节点4',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点3',
                            target: '节点27',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点5',
                            target: '节点28',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点5',
                            target: '节点6',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点7',
                            target: '节点29',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点7',
                            target: '节点8',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点7',
                            target: '节点9',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点7',
                            target: '节点10',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点8',
                            target: '节点9',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点10',
                            target: '节点11',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点9',
                            target: '节点12',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点12',
                            target: '节点13',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点13',
                            target: '节点14',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点6',
                            target: '节点14',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点6',
                            target: '节点11',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点6',
                            target: '节点15',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点6',
                            target: '节点16',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点15',
                            target: '节点16',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点9',
                            target: '节点17',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点16',
                            target: '节点18',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点17',
                            target: '节点18',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点18',
                            target: '节点19',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点19',
                            target: '节点20',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点19',
                            target: '节点21',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点21',
                            target: '节点23',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点21',
                            target: '节点24',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点23',
                            target: '节点24',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点27',
                            target: '节点22',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点3',
                            target: '节点22',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点3',
                            target: '节点5',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点3',
                            target: '节点6',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点2',
                            target: '节点7',
                            label: {
                                normal: {
                                    show: true
                                }
                            },
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点22',
                            target: '节点21',
                            label: {
                                normal: {
                                    show: true
                                }
                            },                            
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },
                        {
                            source: '节点31',
                            target: '节点23',
                            label: {
                                normal: {
                                    show: true
                                }
                            },                            
                            lineStyle:{
                                normal:{
                                    color: 'green',
                                }
                            }
                        },

                    ],
                    // lineStyle: {
                    //     normal: {
                    //         opacity: 0.9,
                    //         width: 2,
                    //         curveness: 0
                    //     }
                    // },
            // markLine : {
            //     symbol:['none','arrow'],
            //     smooth:true,
            //     effect : {
            //         show: true,
            //         loop: true,
            //         scaleSize: 1,
            //         period: 30,
            //         color: '#fff',
            //         shadowBlur: 10
            //     },
                
                
            //     bundling:{
            //     enable: false,
            //     maxTurningAngle: 3,
            //     },
            //     large:false,
            //     precision:-1,
                

                
                
            //     itemStyle : {
            //         normal: {
            //             label:{show: false},
            //             borderWidth:1,
                        
            //             lineStyle: {
            //                 type: 'solid',
            //                 shadowBlur: 10
            //             }
            //         },
            //         emphasis:{label:{show: true}}

            //     },

            //     data : 

            //     {
            //         0:{
            //                     x: 700,
            //                     y: 1300
            //         },
            //         1:{
            //                                            x: 900,
            //                     y: 1300 
            //         }
            //     }

            //     // [
            //     //     // [{name:'节点1'},{name:'节点2'}],

            //     //        [
            //     //             {
            //     //                 name: '两个屏幕坐标之间的标线',
            //     //                 x: 700,
            //     //                 y: 1300
            //     //             },

            //     //         ],  
                        
            //     //         [
            //     //             {
            //     //                 x: 900,
            //     //                 y: 1300
            //     //             }

            //     //         ] 
                    
                    
                  
                    
            //     // ]

            // },
                },
                {
                    name: 'PV节点',

                    type: 'graph',
                    layout: 'none',
                    symbolSize: 30,
                    roam: true,
                    label: {
                        normal: {
                            show: true
                        }
                    },
                    edgeSymbol: ['circle', 'arrow'],
                    edgeSymbolSize: [4, 10],
                    edgeLabel: {
                        normal: {
                            textStyle: {
                                fontSize: 10
                            }
                        }
                    },
                    itemStyle: {   
                         normal : {
                             color:  '#85BF41',  //控制点的颜色

                         },
                    },
                    data: []
                },
                {
                    name: '平衡节点',
                    type: 'graph',
                    layout: 'none',
                    symbolSize: 30,
                    roam: true,
                    label: {
                        normal: {
                            show: true
                        }
                    },
                    edgeSymbol: ['circle', 'arrow'],
                    edgeSymbolSize: [4, 10],
                    edgeLabel: {
                        normal: {
                            textStyle: {
                                fontSize: 10
                            }
                        }
                    },
                    itemStyle:{
                        normal:{
                            color:'blue',
                        }
                    },
                    data: []
                },
                {
                    name: '水电厂总出力'+waterpower+'MW',
                    type: 'graph',
                    itemStyle:{
                        normal:{
                            color:'green',
                        }
                    },
                    data: []
                },
                {
                    name: '风电厂总出力'+windpower+'MW',
                    type: 'graph',
                    itemStyle:{
                        normal:{
                            color:'green',
                        }
                    },
                    data: []
                }
            ]
        };
        //设置节点字体大小
        for (var i = option.series[0].data.length - 1; i >= 0; i--) {
            // console.log(option.series[0].data[i]);
            option.series[0].data[i].label.normal.fontSize = 10;
        };
        // console.log(option.series[0].links.length);
        // console.log(lineData.length);
        var snode = '';
        var enode = '';
        var ypower = 0;
        var wpower = 0;
        // //给线路赋值
        for (var i = option.series[0].links.length - 1; i >= 0; i--) {
            // console.log(option.series[0].data[i]);
            //处理数据
            snode = option.series[0].links[i].source.slice(2);
            enode = option.series[0].links[i].target.slice(2);
            uv = notes[snode-1][0];
            ypower = notes[snode-1][2]+notes[snode-1][4]+notes[enode-1][2]+notes[enode-1][4];
            wpower = notes[snode-1][3]+notes[snode-1][5]+notes[enode-1][3]+notes[enode-1][5];
            // option.series[0].links[i].label.normal['formatter'] = "U:"+uv+"\nP:"+ypower.toFixed(3)+"\nQ:"+wpower.toFixed(3);
            //仅显示支路注入功率
            option.series[0].links[i].label.normal['formatter'] = "线路"+(i+1)+"：\nP:"+ypower.toFixed(3)+"\nQ:"+wpower.toFixed(3);
            if(ypower>1.6)
            {
                option.series[0].links[i].lineStyle.normal.color = 'red';
                option.series[0].links[i].lineStyle.normal.width = 5;
            }
            if(ypower>0.8 && ypower<1.6){
                option.series[0].links[i].lineStyle.normal.color = '#FFB304';
                option.series[0].links[i].lineStyle.normal.width = 5;
            }
        };

        var markNotes = [];
                    //给节点赋值
        for (var i = option.series[0].data.length - 1; i >= 0; i--) {
            // console.log(option.series[0].data[i]);
            //处理数据
            // option.series[0].data[i].label.normal['formatter'] = [option.series[0].data[i].name,'U:'+lineData[i]].join('\n');
            // option.series[0].data[i].label.normal['rich'] = [option.series[0].data[i].name]['position'] = 'inside';
            // option.series[0].data[i].label.normal['rich']=['U']['position'] = 'top';
            //PQ：0.95-1.05 PV：0.95-1.10

            // tooltip:{
            //     formatter:'幅值: 10<br />相角: 1',
                
            // }
            //定义每个节点得幅值/相角
            option.series[0].data[i]['tooltip']=
                {
                     'formatter': '节点: '+(i+1)+'<br />幅值: '+notes[i][0]+'<br />相角: '+notes[i][1]+'<br />注入有功功率: '+notes[i][2]+'<br />注入无功功率: '+notes[i][3]
                };


            if(notes[i]>=1.05 && i !== 0)
            {
                // option.series[0].links[i].lineStyle.normal.color = 'yellow';
                var newnote = 
                        {'symbolSize':'',
                        'symbolOffset':'',
                        'itemStyle':{
                            'normal':{
                                'color':'',
                                'opacity':''
                            }
                        },
                        'label':{
                            'normal':{
                                'fontSize':''
                            }
                            
                        },
                        'x':'',
                        'y':''
                    };
                newnote.symbolSize = [40, 40];
                newnote.symbolOffset = [0, 0];
                newnote.itemStyle.normal.color= 'yellow';
                newnote.itemStyle.normal.opacity = 0.1;
                newnote.label.normal.fontSize = 10;
                newnote.x = option.series[0].data[i].x;
                newnote.y = option.series[0].data[i].y;
                dataOrder = option.series[0].data.push(newnote);
                markNotes.push(dataOrder-1);

            }
        };         
        console.log(markNotes);
        var lineBlur = [4];

        ttimee=1;
        var timeTicket;
        clearInterval(timeTicket);
        timeTicket = setInterval(function (){
            // console.log(1);
            var randnum = Math.random();
            for (var j = lineBlur.length - 1; j >= 0; j--) {
                // console.log(option.series[0].data[i]);
                // option.series[0].links[lineBlur[j]].lineStyle.normal.opacity = randnum;
                // option.series[0].links[lineBlur[j]].lineStyle.normal.color = '#F85437';
            }; 

            //标注点闪烁
            for (var k = markNotes.length - 1; k >= 0; k--) {
                // console.log(dataOrder = option.series[0].data[markNotes[k]].itemStyle.normal.opacity);
               option.series[0].data[markNotes[k]].itemStyle.normal.opacity = randnum;
            };

            ttimee=ttimee+3;
            myChart.setOption(option,true);

        },1000)

        // 使用刚指定的配置项和数据显示图表。
    </script>
</body>
</html>